function dpbox(t,e){this.defaults={width:"auto",height:"auto",overlay:"false",type:"Modal"},this.opts=$.extend(this.opts,this.defaults,e),this._create=function(){this.container||(this.container=$("<div/>",{"class":"dpbox"}).css("display","none").appendTo($("body")),this.header=$("<div/>",{"class":"dpbox-header"}).appendTo(this.container),this.title=$("<div/>",{"class":"dpbox-title"}).appendTo(this.header).css("display","inline"),this.clzBtn=$("<div/>",{"class":"dpbox-clzBtn"}).appendTo(this.header).html("X").css("display","inline").on("click",this.close.bind(this)),this.content=$("<div/>",{"class":"dpbox-content"}).css({width:this.opts.width,height:this.opts.height}).appendTo(this.container),this.setTitle(this.opts.title),this.setContent(this.opts.content),"Confirm"==this.opts.btn&&(this.bottom=$("<div/>",{"class":"dpbox-bottom"}).appendTo(this.container),this.setConfirmBtn()))},this.container||this._create()}var callbacksCount=1,callbacks={};window.DPApp={send_message:function(t,e,n){var i=n&&"function"==typeof n,r=i?callbacksCount++:0;i&&(callbacks[r]=n),e.callbackId=r,e="object"==typeof e?JSON.stringify(e):e+"";var o="js://_?method="+t+"&args="+encodeURIComponent(e)+"&callbackId="+r,a=document.createElement("IFRAME");a.setAttribute("src",o),a.setAttribute("height","1px"),a.setAttribute("width","1px"),document.documentElement.appendChild(a),a.parentNode.removeChild(a),a=null},callback:function(t,e){try{var n=callbacks[t];if(!n)return;n.apply(null,[e])}catch(i){alert(i)}},show_alert:function(t,e){DPApp.send_message("show_alert",t,function(t){e instanceof Function&&e(t.select)})},send_sms:function(t,e){DPApp.send_message("send_sms",{content:t,recipients:e})},open_web:function(t,e){DPApp.send_message("open_web",{modal:t,url:e})},close_web:function(t){DPApp.send_message("close_web",{modal:t})}},dpbox.prototype.setContent=function(t){(null!=t||this.container)&&this.content.html(t)},dpbox.prototype.setTitle=function(t){(null!=t||this.container)&&this.title.html(t)},dpbox.prototype.setConfirmBtn=function(){var t="<div class='buttons'><a href='' class='bn-yel bn-sm'>确定</a><a href='' class='bn-ash bn-sm'>取消</a></div>";this.bottom.html(t)},dpbox.prototype.open=function(){var t=function(){var t=($(window).height()-$(this.container).height())/2,e=($(window).width()-$(this.container).width())/2,n=$(document).scrollTop(),i=$(document).scrollLeft();$(this.container).css({position:"absolute",top:t+n,left:e+i}).show()}.bind(this);this.Opening?t():(this.Opening=!this.Opening,this.opts.overlay&&(this.overlay=$('<div style="background-color: rgb(0, 0, 0); border-top-width: 1px; border-top-style: solid; border-top-color: rgb(0, 0, 0); position: absolute; height: 1557px;width: 100%; left: 0px; top: 0px; opacity: 0.7; tp-a"></div>').appendTo($("body"))),t())},dpbox.prototype.close=function(){this.Opening?(this.Opening=!this.Opening,this.opts.overlay&&this.overlay.css({display:"none"}),this.container.css({display:"none"})):this.container.css({display:"none",opacity:0})},$.dpbox=function(t,e){return e||(e={}),new dpbox(t,$.extend(e,$.fn.dpbox.defaults))};var geo=function(){},proto=geo.prototype;proto.constructor=geo,proto.distance=function(t){if(t>1){var e=t-t%1;return">"+e.toString()+"km"}var n=parseInt(1e3*t);return n.toString()+"m"},proto.value=function(t,e){var n=Math.PI/180,i=(180/Math.PI,6371),r=2*i,o=t.latitude,a=t.longitude,s=e.latitude,c=e.longitude,u=s*n,l=c*n,f=o*n-u,p=a*n-l,h=Math.sin(.5*f),d=Math.sin(.5*p),m=Math.cos(o*n),v=h*h+m*Math.cos(u)*d*d;return r*Math.atan2(Math.sqrt(v),Math.sqrt(1-v))},proto.getLocation=function(t,e){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){window.latitude=e.coords.latitude,window.longitude=e.coords.longitude,t&&t instanceof Function&&t()},function(){e&&e instanceof Function&&e()}):console.log("Geolocation is not supported by this browser.")};var httpUtils={getParam:function(t){var e="";if(isFound=!1,0==window.location.search.indexOf("?")&&window.location.search.indexOf("=")>1)for(arrSource=unescape(window.location.search).substring(1,window.location.search.length).split("&"),i=0;i<arrSource.length&&!isFound;)arrSource[i].indexOf("=")>0&&arrSource[i].split("=")[0].toLowerCase()==t.toLowerCase()&&(e=arrSource[i].split("=")[1],isFound=!0),i++;return e}},share={shareBtn:function(){var t=document.createElement("div");t.style.display="none",t.innerHTML='<div id="shareBox" class="share-tips"><i></i><p>点击右上角按钮分享给好友</p></div>',document.body.appendChild(t),t.addEventListener("click",function(){t.style.display="none"}),$("#J_guide_share").on("click",function(e){e.preventDefault(),t.style.display="block"})}};$(function(){function t(t){$.ajax({url:"http://10.128.97.57:8000/javascript/test.json",type:"GET",dataType:"json",data:t,success:function(t){p&&h?($(t.dealist).each(function(t,e){e.imgUrl=e.imgUrl.replace("450c280","120c90"),e.geoLocations.length>1&&p?(e.value=[],$(e.geoLocations).each(function(t){e.value[t]=x.value({latitude:p,longitude:h},e.geoLocations[t])}),e.minValue=Math.min.apply(Math,e.value),e.distance=x.distance(e.minValue)):e.geoLocations[0]&&p&&(e.minValue=x.value({latitude:p,longitude:h},e.geoLocations[0]),e.distance=x.distance(e.minValue))}),t.dealist.sort(function(t,e){return t.minValue&&e.minValue?t.minValue-e.minValue:t.minValue?e.minValue?void 0:-1:1}),$(".detail-list").append(Mustache.render(dealistTpl.deal,t)),$(".item").length>E&&$(".item").each(function(t){t+1>E&&$(".item").eq(t).hide()}),$(".check-more").on("click",function(){for(var t=E;E+C>t;t++)$(".item").eq(t).show();E+=C,(E>$(".item").length||E==$(".item").length)&&$(this).hide()})):($(".detail-list").append(Mustache.render(dealTpl.deal,t)),$(".item").length>E&&$(".item").each(function(t){t+1>E&&$(".item").eq(t).hide()}),$(".check-more").on("click",function(){for(var t=E;E+C>t;t++)$(".item").eq(t).show();(E>$(".item").length||E==$(".item").length)&&$(this).hide(),E+=C})),e()}})}function e(){var t={};t.couponRuleID=couponRuleID,t.dpid=u,$.cookie("dper")?t.dper=$.cookie("dper"):t.token=httpUtils.getParam("token"),$.ajax({async:!1,url:y,type:"GET",dataType:"jsonp",data:t,jsonp:"jsonp",success:function(t){t.success&&0==t.realtime_tg_fresh?$(".container.op-box").append('<img src="http://t.dianping.com/events/m/mfchgds/lyhneww.png">'):($(".buy-btn").text("免费领"),$(".price strong").text("0")),n(t)},error:function(t){$(".buy-btn").text("免费领"),$(".price strong").text("0"),n(t)}})}function n(t){$(".item").on("click",function(e){e.preventDefault();var n=$(e.target).parents("a").attr("data-tuandealid"),i=v+"/tuan/eventdeal/"+n+"?"+d,r=v+"/tuan/eventdeal/"+n+"?"+m,o=v+"/tuan/deal/"+n;return l.replace(/\./,"")<68.5?(w.showOverlay(0),void w.centershow(".popbox")):0==t.success?void(location.href="dianping://loginweb?url="+encodeURIComponent(v+"/login/app?version="+l+"&logintype=m")+"&goto="+encodeURIComponent("dianping://complexweb?url="+encodeURIComponent(r))):0==t.realtime_tg_fresh?void(location.href=o):t.integrity_score<=0?($.removeCookie("dper"),void(location.href="dianping://loginweb?url="+encodeURIComponent(v+"/login/app?version="+l+"&logintype=m")+"&goto="+encodeURIComponent("dianping://complexweb?url="+encodeURIComponent(r)))):t.mobile?t.integrity_score>9980?void j.show_alert({title:"活动太火爆",message:"前方有些拥挤，请稍后再试！",options:[],cancel:"返回"},function(){location.href="dianping://home"}):t.integrity_score>5e3&&t.integrity_score<=9980&&1==t.up_sms?void(location.href=g+"/lab/common/uploadSmsCheck?eventId="+couponRuleID+"&bizType=2&callback="+encodeURIComponent(i)):void(location.href=i):void(location.href="dianping://modifyphone?goto="+encodeURIComponent("dianping://complexweb?url="+r)+"&url="+encodeURIComponent(v+"/account/modifyMobile?newtoken=!"))})}function i(){var t=document.createElement("iframe"),e=document.createElement("div"),n="dpshare://_?content="+encodeURIComponent(JSON.stringify(j.shareConfig));e.setAttribute("style","display:none"),e.appendChild(t),document.body.appendChild(e),t.setAttribute("src",n)}function r(){t(),share.shareBtn(),o.on("click",function(t){t.preventDefault(),w.showOverlay(1),$(".popbox").hide()}),a.on("click",function(t){return t.preventDefault(),window.location.href="http://m.dianping.com/download/synthesislink?redirect=3130&tag=external",!1}),i()}var o=$(".j-back"),a=$(".j-update"),s=(httpUtils.getParam("eventId"),httpUtils.getParam("eventName")),c=httpUtils.getParam("cityid"),u=httpUtils.getParam("dpid"),l=httpUtils.getParam("version"),f=httpUtils.getParam("token"),p=httpUtils.getParam("latitude"),h=httpUtils.getParam("longitude");couponRuleID=httpUtils.getParam("couponRuleID"),env=httpUtils.getParam("env"),(void 0==typeof s||""==s)&&(s="mfchwlzs"),(void 0==typeof couponRuleID||""==couponRuleID)&&(couponRuleID="102201"),(void 0==typeof env||""==env)&&(env="product");var d="eventName="+s+"&cityid="+c+"&version="+l+"&token="+f+"&latitude="+p+"&longitude="+h+"&dpid="+u+"&couponRuleID="+couponRuleID+"&source=1",m="eventName="+s+"&cityid="+c+"&version="+l+"&token=*&latitude="+p+"&longitude="+h+"&dpid="+u+"&couponRuleID="+couponRuleID+"&source=1",v="http://m.dianping.com",g="http://t.dianping.com",y="http://mm.dianping.com/weixin/promotion/user-profile/jsonp",b="http://evt.dianping.com/mfchwl/json/"+c+".json";"product"!=env&&(b="http://evt.dianping.dp/mfchwlzs/json/"+c+".json",y="http://mm.51ping.com/weixin/promotion/user-profile/jsonp",v="http://m.51ping.com",g="http://t.51ping.com");var w={showOverlay:function(t){var e=$('<div id="J_overlay" style="position:absolute;left:0;top:0;background:#000;_filter:alpha(opacity=50);z-index:999;"></div>');t?$("#J_overlay").remove():e.appendTo($("body")).css({width:$(window).width(),height:"1700px",opacity:.5})},centershow:function(t){var e=($(window).height()-140)/2,n=($(window).width()-$(t).css("width").substring(0,3))/2,i=$(window).scrollTop()||0,r=$(window).scrollLeft()||0;$(t).css({position:"absolute",top:e+i,left:n+r}).show()}},x=new geo,E=10,C=100,j={shareConfig:{url:"http://t1.dpfile.com/t/html/app/events/zonefreeeating1017/index.html?"+ +new Date,image:"http://i1.s1.dpfile.com/pc/tgzt/5e6bd31183e7f5ea30ec611bddc9dfae(1600c550)/thumb.jpg",title:"大众点评豪掷10亿，请新用户免费吃喝玩乐",desc:"吃喝玩乐，通通不要钱，大众点评新用户专享!"}};r()});var dealTpl={deal:'{{#dealist}}<a class="item J_deal" data-tuandealid="{{id}}">            <div class="pic">                <img src="{{imgUrl}}">            </div>            <div class="info">                <h3>{{dealGroupShortName}}<span class="geo">{{distance}}</span></h3>                <h4>{{recommendReason}}</h4>                <div class="buy-box Fix">                    <div class="price-box f-l">                        <span class="price">¥<strong>{{price}}</strong></span>                        <span class="o-price">¥<strong>{{marketPrice}}</strong></span>                    </div>                        <span class="buy-btn f-r">去团购</span>                </div>            </div>        </a>{{/dealist}}'};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):Zepto)}(function(t){function e(t){return s.raw?t:encodeURIComponent(t)}function n(t){return s.raw?t:decodeURIComponent(t)}function i(t){return e(s.json?JSON.stringify(t):String(t))}function r(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(a," ")),s.json?JSON.parse(t):t}catch(e){}}function o(e,n){var i=s.raw?e:r(e);return t.isFunction(n)?n(i):i}var a=/\+/g,s=t.cookie=function(r,a,c){if(arguments.length>1&&!t.isFunction(a)){if(c=t.extend({},s.defaults,c),"number"==typeof c.expires){var u=c.expires,l=c.expires=new Date;l.setTime(+l+864e5*u)}return document.cookie=[e(r),"=",i(a),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}for(var f=r?void 0:{},p=document.cookie?document.cookie.split("; "):[],h=0,d=p.length;d>h;h++){var m=p[h].split("="),v=n(m.shift()),g=m.join("=");if(r&&r===v){f=o(g,a);break}r||void 0===(g=o(g))||(f[v]=g)}return f};s.defaults={},t.removeCookie=function(e,n){return void 0===t.cookie(e)?!1:(t.cookie(e,"",t.extend({},n,{expires:-1})),!t.cookie(e))}}),function(t,e){"object"==typeof exports&&exports?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Mustache={})}(this,function(t){function e(t){return"function"==typeof t}function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(t,e){return d.call(t,e)}function r(t){return!i(m,t)}function o(t){return String(t).replace(/[&<>"'\/]/g,function(t){return v[t]})}function a(e,i){function o(){if(E&&!C)for(;v.length;)delete m[v.pop()];else v=[];E=!1,C=!1}function a(t){if("string"==typeof t&&(t=t.split(y,2)),!h(t)||2!==t.length)throw new Error("Invalid tags: "+t);l=new RegExp(n(t[0])+"\\s*"),f=new RegExp("\\s*"+n(t[1])),p=new RegExp("\\s*"+n("}"+t[1]))}if(!e)return[];var l,f,p,d=[],m=[],v=[],E=!1,C=!1;a(i||t.tags);for(var $,j,T,k,S,_,O=new u(e);!O.eos();){if($=O.pos,T=O.scanUntil(l))for(var N=0,U=T.length;U>N;++N)k=T.charAt(N),r(k)?v.push(m.length):C=!0,m.push(["text",k,$,$+1]),$+=1,"\n"===k&&o();if(!O.scan(l))break;if(E=!0,j=O.scan(x)||"name",O.scan(g),"="===j?(T=O.scanUntil(b),O.scan(b),O.scanUntil(f)):"{"===j?(T=O.scanUntil(p),O.scan(w),O.scanUntil(f),j="&"):T=O.scanUntil(f),!O.scan(f))throw new Error("Unclosed tag at "+O.pos);if(S=[j,T,$,O.pos],m.push(S),"#"===j||"^"===j)d.push(S);else if("/"===j){if(_=d.pop(),!_)throw new Error('Unopened section "'+T+'" at '+$);if(_[1]!==T)throw new Error('Unclosed section "'+_[1]+'" at '+$)}else"name"===j||"{"===j||"&"===j?C=!0:"="===j&&a(T)}if(_=d.pop())throw new Error('Unclosed section "'+_[1]+'" at '+O.pos);return c(s(m))}function s(t){for(var e,n,i=[],r=0,o=t.length;o>r;++r)e=t[r],e&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(i.push(e),n=e));return i}function c(t){for(var e,n,i=[],r=i,o=[],a=0,s=t.length;s>a;++a)switch(e=t[a],e[0]){case"#":case"^":r.push(e),o.push(e),r=e[4]=[];break;case"/":n=o.pop(),n[5]=e[2],r=o.length>0?o[o.length-1][4]:i;break;default:r.push(e)}return i}function u(t){this.string=t,this.tail=t,this.pos=0}function l(t,e){this.view=null==t?{}:t,this.cache={".":this.view},this.parent=e}function f(){this.cache={}}var p=Object.prototype.toString,h=Array.isArray||function(t){return"[object Array]"===p.call(t)},d=RegExp.prototype.test,m=/\S/,v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},g=/\s*/,y=/\s+/,b=/\s*=/,w=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;u.prototype.eos=function(){return""===this.tail},u.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},u.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},l.prototype.push=function(t){return new l(t,this)},l.prototype.lookup=function(t){var n,i=this.cache;if(t in i)n=i[t];else{for(var r,o,a=this;a;){if(t.indexOf(".")>0)for(n=a.view,r=t.split("."),o=0;null!=n&&o<r.length;)n=n[r[o++]];else n=a.view[t];if(null!=n)break;a=a.parent}i[t]=n}return e(n)&&(n=n.call(this.view)),n},f.prototype.clearCache=function(){this.cache={}},f.prototype.parse=function(t,e){var n=this.cache,i=n[t];return null==i&&(i=n[t]=a(t,e)),i},f.prototype.render=function(t,e,n){var i=this.parse(t),r=e instanceof l?e:new l(e);return this.renderTokens(i,r,n,t)},f.prototype.renderTokens=function(n,i,r,o){function a(t){return l.render(t,i,r)}for(var s,c,u="",l=this,f=0,p=n.length;p>f;++f)switch(s=n[f],s[0]){case"#":if(c=i.lookup(s[1]),!c)continue;if(h(c))for(var d=0,m=c.length;m>d;++d)u+=this.renderTokens(s[4],i.push(c[d]),r,o);else if("object"==typeof c||"string"==typeof c)u+=this.renderTokens(s[4],i.push(c),r,o);else if(e(c)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");c=c.call(i.view,o.slice(s[3],s[5]),a),null!=c&&(u+=c)}else u+=this.renderTokens(s[4],i,r,o);break;case"^":c=i.lookup(s[1]),(!c||h(c)&&0===c.length)&&(u+=this.renderTokens(s[4],i,r,o));break;case">":if(!r)continue;c=e(r)?r(s[1]):r[s[1]],null!=c&&(u+=this.renderTokens(this.parse(c),i,r,c));break;case"&":c=i.lookup(s[1]),null!=c&&(u+=c);break;case"name":c=i.lookup(s[1]),null!=c&&(u+=t.escape(c));break;case"text":u+=s[1]}return u},t.name="mustache.js",t.version="0.8.1",t.tags=["{{","}}"];var E=new f;t.clearCache=function(){return E.clearCache()},t.parse=function(t,e){return E.parse(t,e)},t.render=function(t,e,n){return E.render(t,e,n)},t.to_html=function(n,i,r,o){var a=t.render(n,i,r);return e(o)?void o(a):a},t.escape=o,t.Scanner=u,t.Context=l,t.Writer=f}),!function(t,e){function n(t){return function(e){return{}.toString.call(e)=="[object "+t+"]"}}function i(){return j++}function r(t){return t.match(S)[0]}function o(t){for(t=t.replace(_,"/"),t=t.replace(N,"$1/");t.match(O);)t=t.replace(O,"/");return t}function a(t){var e=t.length-1,n=t.charAt(e);return"#"===n?t.substring(0,e):".js"===t.substring(e-2)||t.indexOf("?")>0||"/"===n?t:t+".js"}function s(t){var e=w.alias;return e&&E(e[t])?e[t]:t}function c(t){var e,n=w.paths;return n&&(e=t.match(U))&&E(n[e[1]])&&(t=n[e[1]]+e[2]),t}function u(t){var e=w.vars;return e&&t.indexOf("{")>-1&&(t=t.replace(A,function(t,n){return E(e[n])?e[n]:t})),t}function l(t){var e=w.map,n=t;if(e)for(var i=0,r=e.length;r>i;i++){var o=e[i];if(n=$(o)?o(t)||t:t.replace(o[0],o[1]),n!==t)break}return n}function f(t,e){var n,i=t.charAt(0);if(D.test(t))n=t;else if("."===i)n=o((e?r(e):w.cwd)+t);else if("/"===i){var a=w.cwd.match(P);n=a?a[0]+t.substring(1):t}else n=w.base+t;return 0===n.indexOf("//")&&(n=location.protocol+n),n}function p(t,e){if(!t)return"";t=s(t),t=c(t),t=u(t),t=a(t);var n=f(t,e);return n=l(n)}function h(t){return t.hasAttribute?t.src:t.getAttribute("src",4)}function d(t,e,n){var i=I.createElement("script");if(n){var r=$(n)?n(t):n;r&&(i.charset=r)}m(i,e,t),i.async=!0,i.src=t,F=i,Z?V.insertBefore(i,Z):V.appendChild(i),F=null}function m(t,e,n){function i(){t.onload=t.onerror=t.onreadystatechange=null,w.debug||V.removeChild(t),t=null,e()}var r="onload"in t;r?(t.onload=i,t.onerror=function(){k("error",{uri:n,node:t}),i()}):t.onreadystatechange=function(){/loaded|complete/.test(t.readyState)&&i()}}function v(){if(F)return F;if(z&&"interactive"===z.readyState)return z;for(var t=V.getElementsByTagName("script"),e=t.length-1;e>=0;e--){var n=t[e];if("interactive"===n.readyState)return z=n}}function g(t){var e=[];return t.replace(H,"").replace(G,function(t,n,i){i&&e.push(i)}),e}function y(t,e){this.uri=t,this.dependencies=e||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}if(!t.seajs){var b=t.seajs={version:"2.3.0"},w=b.data={},x=n("Object"),E=n("String"),C=Array.isArray||n("Array"),$=n("Function"),j=0,T=w.events={};b.on=function(t,e){var n=T[t]||(T[t]=[]);return n.push(e),b},b.off=function(t,e){if(!t&&!e)return T=w.events={},b;var n=T[t];if(n)if(e)for(var i=n.length-1;i>=0;i--)n[i]===e&&n.splice(i,1);else delete T[t];return b};var k=b.emit=function(t,e){var n=T[t];if(n){n=n.slice();for(var i=0,r=n.length;r>i;i++)n[i](e)}return b},S=/[^?#]*\//,_=/\/\.\//g,O=/\/[^/]+\/\.\.\//,N=/([^:/])\/+\//g,U=/^([^/:]+)(\/.+)$/,A=/{([^{]+)}/g,D=/^\/\/.|:\//,P=/^.*?\/\/.*?\//,I=document,R=location.href&&0!==location.href.indexOf("about:")?r(location.href):"",L=I.scripts,q=I.getElementById("seajsnode")||L[L.length-1],M=r(h(q)||R);b.resolve=p;var F,z,V=I.head||I.getElementsByTagName("head")[0]||I.documentElement,Z=V.getElementsByTagName("base")[0];b.request=d;var B,G=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,H=/\\\\/g,J=b.cache={},X={},W={},Y={},K=y.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};y.prototype.resolve=function(){for(var t=this,e=t.dependencies,n=[],i=0,r=e.length;r>i;i++)n[i]=y.resolve(e[i],t.uri);return n},y.prototype.load=function(){var t=this;if(!(t.status>=K.LOADING)){t.status=K.LOADING;var n=t.resolve();k("load",n);for(var i,r=t._remain=n.length,o=0;r>o;o++)i=y.get(n[o]),i.status<K.LOADED?i._waitings[t.uri]=(i._waitings[t.uri]||0)+1:t._remain--;if(0===t._remain)return t.onload(),e;var a={};for(o=0;r>o;o++)i=J[n[o]],i.status<K.FETCHING?i.fetch(a):i.status===K.SAVED&&i.load();for(var s in a)a.hasOwnProperty(s)&&a[s]()}},y.prototype.onload=function(){var t=this;t.status=K.LOADED,t.callback&&t.callback();var e,n,i=t._waitings;for(e in i)i.hasOwnProperty(e)&&(n=J[e],n._remain-=i[e],0===n._remain&&n.onload());delete t._waitings,delete t._remain},y.prototype.fetch=function(t){function n(){b.request(a.requestUri,a.onRequest,a.charset)}function i(){delete X[s],W[s]=!0,B&&(y.save(o,B),B=null);var t,e=Y[s];for(delete Y[s];t=e.shift();)t.load()}var r=this,o=r.uri;r.status=K.FETCHING;var a={uri:o};k("fetch",a);var s=a.requestUri||o;return!s||W[s]?(r.load(),e):X[s]?(Y[s].push(r),e):(X[s]=!0,Y[s]=[r],k("request",a={uri:o,requestUri:s,onRequest:i,charset:w.charset}),a.requested||(t?t[a.requestUri]=n:n()),e)},y.prototype.exec=function(){function t(e){return y.get(t.resolve(e)).exec()}var n=this;if(n.status>=K.EXECUTING)return n.exports;n.status=K.EXECUTING;var r=n.uri;t.resolve=function(t){return y.resolve(t,r)},t.async=function(e,n){return y.use(e,n,r+"_async_"+i()),t};var o=n.factory,a=$(o)?o(t,n.exports={},n):o;return a===e&&(a=n.exports),delete n.factory,n.exports=a,n.status=K.EXECUTED,k("exec",n),a},y.resolve=function(t,e){var n={id:t,refUri:e};return k("resolve",n),n.uri||b.resolve(n.id,e)},y.define=function(t,n,i){var r=arguments.length;1===r?(i=t,t=e):2===r&&(i=n,C(t)?(n=t,t=e):n=e),!C(n)&&$(i)&&(n=g(""+i));var o={id:t,uri:y.resolve(t),deps:n,factory:i};if(!o.uri&&I.attachEvent){var a=v();a&&(o.uri=a.src)}k("define",o),o.uri?y.save(o.uri,o):B=o},y.save=function(t,e){var n=y.get(t);n.status<K.SAVED&&(n.id=e.id||t,n.dependencies=e.deps||[],n.factory=e.factory,n.status=K.SAVED,k("save",n))},y.get=function(t,e){return J[t]||(J[t]=new y(t,e))},y.use=function(e,n,i){var r=y.get(i,C(e)?e:[e]);r.callback=function(){for(var e=[],i=r.resolve(),o=0,a=i.length;a>o;o++)e[o]=J[i[o]].exec();n&&n.apply(t,e),delete r.callback},r.load()},b.use=function(t,e){return y.use(t,e,w.cwd+"_use_"+i()),b},y.define.cmd={},t.define=y.define,b.Module=y,w.fetchedList=W,w.cid=i,b.require=function(t){var e=y.get(y.resolve(t));return e.status<K.EXECUTING&&(e.onload(),e.exec()),e.exports},w.base=M,w.dir=M,w.cwd=R,w.charset="utf-8",b.config=function(t){for(var e in t){var n=t[e],i=w[e];if(i&&x(i))for(var r in n)i[r]=n[r];else C(i)?n=i.concat(n):"base"===e&&("/"!==n.slice(-1)&&(n+="/"),n=f(n)),w[e]=n}return k("config",t),b}}}(this);var Zepto=function(){function t(t){return null==t?String(t):G[H.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function o(t){return r(t)&&!n(t)&&Object.getPrototypeOf(t)==Object.prototype}function a(t){return"number"==typeof t.length}function s(t){return _.call(t,function(t){return null!=t})}function c(t){return t.length>0?C.fn.concat.apply([],t):t}function u(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(t){return t in U?U[t]:U[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function f(t,e){return"number"!=typeof e||A[u(t)]?e:e+"px"}function p(t){var e,n;return N[t]||(e=O.createElement(t),O.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),N[t]=n),N[t]}function h(t){return"children"in t?S.call(t.children):C.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function d(t,e,n){for(E in e)n&&(o(e[E])||Y(e[E]))?(o(e[E])&&!o(t[E])&&(t[E]={}),Y(e[E])&&!Y(t[E])&&(t[E]=[]),d(t[E],e[E],n)):e[E]!==x&&(t[E]=e[E])}function m(t,e){return null==e?C(t):C(t).filter(e)}function v(t,n,i,r){return e(n)?n.call(t,i,r):n}function g(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function y(t,e){var n=t.className,i=n&&n.baseVal!==x;return e===x?i?n.baseVal:n:void(i?n.baseVal=e:t.className=e)}function b(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?C.parseJSON(t):t:e):t}catch(n){return t}}function w(t,e){e(t);for(var n=0,i=t.childNodes.length;i>n;n++)w(t.childNodes[n],e)}var x,E,C,$,j,T,k=[],S=k.slice,_=k.filter,O=window.document,N={},U={},A={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},D=/^\s*<(\w+|!)[^>]*>/,P=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,I=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,R=/^(?:body|html)$/i,L=/([A-Z])/g,q=["val","css","html","text","data","width","height","offset"],M=["after","prepend","before","append"],F=O.createElement("table"),z=O.createElement("tr"),V={tr:O.createElement("tbody"),tbody:F,thead:F,tfoot:F,td:z,th:z,"*":O.createElement("div")},Z=/complete|loaded|interactive/,B=/^[\w-]*$/,G={},H=G.toString,J={},X=O.createElement("div"),W={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Y=Array.isArray||function(t){return t instanceof Array};return J.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=X).appendChild(t),i=~J.qsa(r,e).indexOf(t),o&&X.removeChild(t),i},j=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},T=function(t){return _.call(t,function(e,n){return t.indexOf(e)==n})},J.fragment=function(t,e,n){var i,r,a;return P.test(t)&&(i=C(O.createElement(RegExp.$1))),i||(t.replace&&(t=t.replace(I,"<$1></$2>")),e===x&&(e=D.test(t)&&RegExp.$1),e in V||(e="*"),a=V[e],a.innerHTML=""+t,i=C.each(S.call(a.childNodes),function(){a.removeChild(this)})),o(n)&&(r=C(i),C.each(n,function(t,e){q.indexOf(t)>-1?r[t](e):r.attr(t,e)})),i},J.Z=function(t,e){return t=t||[],t.__proto__=C.fn,t.selector=e||"",t},J.isZ=function(t){return t instanceof J.Z},J.init=function(t,n){var i;if(!t)return J.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&D.test(t))i=J.fragment(t,RegExp.$1,n),t=null;else{if(n!==x)return C(n).find(t);i=J.qsa(O,t)}else{if(e(t))return C(O).ready(t);if(J.isZ(t))return t;if(Y(t))i=s(t);else if(r(t))i=[t],t=null;else if(D.test(t))i=J.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==x)return C(n).find(t);i=J.qsa(O,t)}}return J.Z(i,t)},C=function(t,e){return J.init(t,e)},C.extend=function(t){var e,n=S.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){d(t,n,e)}),t},J.qsa=function(t,e){var n,r="#"==e[0],o=!r&&"."==e[0],a=r||o?e.slice(1):e,s=B.test(a);return i(t)&&s&&r?(n=t.getElementById(a))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:S.call(s&&!r?o?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))},C.contains=O.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},C.type=t,C.isFunction=e,C.isWindow=n,C.isArray=Y,C.isPlainObject=o,C.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},C.inArray=function(t,e,n){return k.indexOf.call(e,t,n)},C.camelCase=j,C.trim=function(t){return null==t?"":String.prototype.trim.call(t)},C.uuid=0,C.support={},C.expr={},C.map=function(t,e){var n,i,r,o=[];if(a(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&o.push(n);else for(r in t)n=e(t[r],r),null!=n&&o.push(n);return c(o)},C.each=function(t,e){var n,i;if(a(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},C.grep=function(t,e){return _.call(t,e)},window.JSON&&(C.parseJSON=JSON.parse),C.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){G["[object "+e+"]"]=e.toLowerCase()}),C.fn={forEach:k.forEach,reduce:k.reduce,push:k.push,sort:k.sort,indexOf:k.indexOf,concat:k.concat,map:function(t){return C(C.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return C(S.apply(this,arguments))},ready:function(t){return Z.test(O.readyState)&&O.body?t(C):O.addEventListener("DOMContentLoaded",function(){t(C)},!1),this},get:function(t){return t===x?S.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return k.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):C(_.call(this,function(e){return J.matches(e,t)}))},add:function(t,e){return C(T(this.concat(C(t,e))))},is:function(t){return this.length>0&&J.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==x)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):a(t)&&e(t.item)?S.call(t):C(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return C(n)},has:function(t){return this.filter(function(){return r(t)?C.contains(this,t):C(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:C(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:C(t)},find:function(t){var e,n=this;return e=t?"object"==typeof t?C(t).filter(function(){var t=this;return k.some.call(n,function(e){return C.contains(e,t)})}):1==this.length?C(J.qsa(this[0],t)):this.map(function(){return J.qsa(this,t)}):[]},closest:function(t,e){var n=this[0],r=!1;for("object"==typeof t&&(r=C(t));n&&!(r?r.indexOf(n)>=0:J.matches(n,t));)n=n!==e&&!i(n)&&n.parentNode;return C(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=C.map(n,function(t){return(t=t.parentNode)&&!i(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return m(e,t)},parent:function(t){return m(T(this.pluck("parentNode")),t)},children:function(t){return m(this.map(function(){return h(this)}),t)},contents:function(){return this.map(function(){return S.call(this.childNodes)})},siblings:function(t){return m(this.map(function(t,e){return _.call(h(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return C.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=p(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var i=C(t).get(0),r=i.parentNode||this.length>1;return this.each(function(e){C(this).wrapAll(n?t.call(this,e):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){C(this[0]).before(t=C(t));for(var e;(e=t.children()).length;)t=e.first();C(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var i=C(this),r=i.contents(),o=n?t.call(this,e):t;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){C(this).replaceWith(C(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=C(this);(t===x?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return C(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return C(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;C(this).empty().append(v(this,t,e,n))
}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=v(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(t,e){var n;return"string"!=typeof t||1 in arguments?this.each(function(n){if(1===this.nodeType)if(r(t))for(E in t)g(this,E,t[E]);else g(this,t,v(this,e,n,this.getAttribute(t)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:x},removeAttr:function(t){return this.each(function(){1===this.nodeType&&g(this,t)})},prop:function(t,e){return t=W[t]||t,1 in arguments?this.each(function(n){this[t]=v(this,e,n,this[t])}):this[0]&&this[0][t]},data:function(t,e){var n="data-"+t.replace(L,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,e):this.attr(n);return null!==i?b(i):x},val:function(t){return 0 in arguments?this.each(function(e){this.value=v(this,t,e,this.value)}):this[0]&&(this[0].multiple?C(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=C(this),i=v(this,t,e,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2){var i=this[0],r=getComputedStyle(i,"");if(!i)return;if("string"==typeof e)return i.style[j(e)]||r.getPropertyValue(e);if(Y(e)){var o={};return C.each(Y(e)?e:[e],function(t,e){o[e]=i.style[j(e)]||r.getPropertyValue(e)}),o}}var a="";if("string"==t(e))n||0===n?a=u(e)+":"+f(e,n):this.each(function(){this.style.removeProperty(u(e))});else for(E in e)e[E]||0===e[E]?a+=u(E)+":"+f(E,e[E])+";":this.each(function(){this.style.removeProperty(u(E))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(C(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?k.some.call(this,function(t){return this.test(y(t))},l(t)):!1},addClass:function(t){return t?this.each(function(e){$=[];var n=y(this),i=v(this,t,e,n);i.split(/\s+/g).forEach(function(t){C(this).hasClass(t)||$.push(t)},this),$.length&&y(this,n+(n?" ":"")+$.join(" "))}):this},removeClass:function(t){return this.each(function(e){return t===x?y(this,""):($=y(this),v(this,t,e,$).split(/\s+/g).forEach(function(t){$=$.replace(l(t)," ")}),void y(this,$.trim()))})},toggleClass:function(t,e){return t?this.each(function(n){var i=C(this),r=v(this,t,n,y(this));r.split(/\s+/g).forEach(function(t){(e===x?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===x?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===x?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=R.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(C(t).css("margin-top"))||0,n.left-=parseFloat(C(t).css("margin-left"))||0,i.top+=parseFloat(C(e[0]).css("border-top-width"))||0,i.left+=parseFloat(C(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||O.body;t&&!R.test(t.nodeName)&&"static"==C(t).css("position");)t=t.offsetParent;return t})}},C.fn.detach=C.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});C.fn[t]=function(r){var o,a=this[0];return r===x?n(a)?a["inner"+e]:i(a)?a.documentElement["scroll"+e]:(o=this.offset())&&o[t]:this.each(function(e){a=C(this),a.css(t,v(this,r,e,a[t]()))})}}),M.forEach(function(e,n){var i=n%2;C.fn[e]=function(){var e,r,o=C.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:J.fragment(n)}),a=this.length>1;return o.length<1?this:this.each(function(t,e){r=i?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null;var s=C.contains(O.documentElement,r);o.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!r)return C(t).remove();r.insertBefore(t,e),s&&w(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},C.fn[i?e+"To":"insert"+(n?"Before":"After")]=function(t){return C(t)[e](this),this}}),J.Z.prototype=C.fn,J.uniq=T,J.deserializeValue=b,C.zepto=J,C}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function e(t){return t._zid||(t._zid=p++)}function n(t,n,o,a){if(n=i(n),n.ns)var s=r(n.ns);return(v[e(t)]||[]).filter(function(t){return!(!t||n.e&&t.e!=n.e||n.ns&&!s.test(t.ns)||o&&e(t.fn)!==e(o)||a&&t.sel!=a)})}function i(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(t,e){return t.del&&!y&&t.e in b||!!e}function a(t){return w[t]||y&&b[t]||t}function s(n,r,s,c,l,p,h){var d=e(n),m=v[d]||(v[d]=[]);r.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(s);var r=i(e);r.fn=s,r.sel=l,r.e in w&&(s=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?r.fn.apply(this,arguments):void 0}),r.del=p;var d=p||s;r.proxy=function(t){if(t=u(t),!t.isImmediatePropagationStopped()){t.data=c;var e=d.apply(n,t._args==f?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},r.i=m.length,m.push(r),"addEventListener"in n&&n.addEventListener(a(r.e),r.proxy,o(r,h))})}function c(t,i,r,s,c){var u=e(t);(i||"").split(/\s/).forEach(function(e){n(t,e,r,s).forEach(function(e){delete v[u][e.i],"removeEventListener"in t&&t.removeEventListener(a(e.e),e.proxy,o(e,c))})})}function u(e,n){return(n||!e.isDefaultPrevented)&&(n||(n=e),t.each($,function(t,i){var r=n[t];e[t]=function(){return this[i]=x,r&&r.apply(n,arguments)},e[i]=E}),(n.defaultPrevented!==f?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=x)),e}function l(t){var e,n={originalEvent:t};for(e in t)C.test(e)||t[e]===f||(n[e]=t[e]);return u(n,t)}var f,p=1,h=Array.prototype.slice,d=t.isFunction,m=function(t){return"string"==typeof t},v={},g={},y="onfocusin"in window,b={focus:"focusin",blur:"focusout"},w={mouseenter:"mouseover",mouseleave:"mouseout"};g.click=g.mousedown=g.mouseup=g.mousemove="MouseEvents",t.event={add:s,remove:c},t.proxy=function(n,i){var r=2 in arguments&&h.call(arguments,2);if(d(n)){var o=function(){return n.apply(i,r?r.concat(h.call(arguments)):arguments)};return o._zid=e(n),o}if(m(i))return r?(r.unshift(n[i],n),t.proxy.apply(null,r)):t.proxy(n[i],n);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var x=function(){return!0},E=function(){return!1},C=/^([A-Z]|returnValue$|layer[XY]$)/,$={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i,r,o){var a,u,p=this;return e&&!m(e)?(t.each(e,function(t,e){p.on(t,n,i,e,o)}),p):(m(n)||d(r)||r===!1||(r=i,i=n,n=f),(d(i)||i===!1)&&(r=i,i=f),r===!1&&(r=E),p.each(function(f,p){o&&(a=function(t){return c(p,t.type,r),r.apply(this,arguments)}),n&&(u=function(e){var i,o=t(e.target).closest(n,p).get(0);return o&&o!==p?(i=t.extend(l(e),{currentTarget:o,liveFired:p}),(a||r).apply(o,[i].concat(h.call(arguments,1)))):void 0}),s(p,e,r,i,n,u||a)}))},t.fn.off=function(e,n,i){var r=this;return e&&!m(e)?(t.each(e,function(t,e){r.off(t,n,e)}),r):(m(n)||d(i)||i===!1||(i=n,n=f),i===!1&&(i=E),r.each(function(){c(this,e,i,n)}))},t.fn.trigger=function(e,n){return e=m(e)||t.isPlainObject(e)?t.Event(e):u(e),e._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,i){var r,o;return this.each(function(a,s){r=l(m(e)?t.Event(e):e),r._args=i,r.target=s,t.each(n(s,e.type||e),function(t,e){return o=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){m(t)||(e=t,t=e.type);var n=document.createEvent(g[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),u(n)}}(Zepto),function(t){function e(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.isDefaultPrevented()}function n(t,n,i,r){return t.global?e(n||y,i,r):void 0}function i(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function o(t,e){var i=e.context;return e.beforeSend.call(i,t,e)===!1||n(e,i,"ajaxBeforeSend",[t,e])===!1?!1:void n(e,i,"ajaxSend",[t,e])}function a(t,e,i,r){var o=i.context,a="success";i.success.call(o,t,a,e),r&&r.resolveWith(o,[t,a,e]),n(i,o,"ajaxSuccess",[e,i,t]),c(a,e,i)}function s(t,e,i,r,o){var a=r.context;r.error.call(a,i,e,t),o&&o.rejectWith(a,[i,e,t]),n(r,a,"ajaxError",[i,r,t||e]),c(e,i,r)}function c(t,e,i){var o=i.context;i.complete.call(o,e,t),n(i,o,"ajaxComplete",[e,i]),r(i)}function u(){}function l(t){return t&&(t=t.split(";",2)[0]),t&&(t==C?"html":t==E?"json":w.test(t)?"script":x.test(t)&&"xml")||"text"}function f(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function p(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=f(e.url,e.data),e.data=void 0)}function h(e,n,i,r){return t.isFunction(n)&&(r=i,i=n,n=void 0),t.isFunction(i)||(r=i,i=void 0),{url:e,data:n,success:i,dataType:r}}function d(e,n,i,r){var o,a=t.isArray(n),s=t.isPlainObject(n);t.each(n,function(n,c){o=t.type(c),r&&(n=i?r:r+"["+(s||"object"==o||"array"==o?n:"")+"]"),!r&&a?e.add(c.name,c.value):"array"==o||!i&&"object"==o?d(e,c,i,n):e.add(n,c)})}var m,v,g=0,y=window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,w=/^(?:text|application)\/javascript/i,x=/^(?:text|application)\/xml/i,E="application/json",C="text/html",$=/^\s*$/;t.active=0,t.ajaxJSONP=function(e,n){if(!("type"in e))return t.ajax(e);var i,r,c=e.jsonpCallback,u=(t.isFunction(c)?c():c)||"jsonp"+ ++g,l=y.createElement("script"),f=window[u],p=function(e){t(l).triggerHandler("error",e||"abort")},h={abort:p};return n&&n.promise(h),t(l).on("load error",function(o,c){clearTimeout(r),t(l).off().remove(),"error"!=o.type&&i?a(i[0],h,e,n):s(null,c||"error",h,e,n),window[u]=f,i&&t.isFunction(f)&&f(i[0]),f=i=void 0}),o(h,e)===!1?(p("abort"),h):(window[u]=function(){i=arguments},l.src=e.url.replace(/\?(.+)=\?/,"?$1="+u),y.head.appendChild(l),e.timeout>0&&(r=setTimeout(function(){p("timeout")},e.timeout)),h)},t.ajaxSettings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:E,xml:"application/xml, text/xml",html:C,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n=t.extend({},e||{}),r=t.Deferred&&t.Deferred();for(m in t.ajaxSettings)void 0===n[m]&&(n[m]=t.ajaxSettings[m]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),p(n);var c=n.dataType,h=/\?.+=\?/.test(n.url);if(h&&(c="jsonp"),n.cache!==!1&&(e&&e.cache===!0||"script"!=c&&"jsonp"!=c)||(n.url=f(n.url,"_="+Date.now())),"jsonp"==c)return h||(n.url=f(n.url,n.jsonp?n.jsonp+"=?":n.jsonp===!1?"":"callback=?")),t.ajaxJSONP(n,r);var d,g=n.accepts[c],y={},b=function(t,e){y[t.toLowerCase()]=[t,e]},w=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,x=n.xhr(),E=x.setRequestHeader;if(r&&r.promise(x),n.crossDomain||b("X-Requested-With","XMLHttpRequest"),b("Accept",g||"*/*"),(g=n.mimeType||g)&&(g.indexOf(",")>-1&&(g=g.split(",",2)[0]),x.overrideMimeType&&x.overrideMimeType(g)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&b("Content-Type",n.contentType||"application/x-www-form-urlencoded"),n.headers)for(v in n.headers)b(v,n.headers[v]);if(x.setRequestHeader=b,x.onreadystatechange=function(){if(4==x.readyState){x.onreadystatechange=u,clearTimeout(d);var e,i=!1;if(x.status>=200&&x.status<300||304==x.status||0==x.status&&"file:"==w){c=c||l(n.mimeType||x.getResponseHeader("content-type")),e=x.responseText;try{"script"==c?(1,eval)(e):"xml"==c?e=x.responseXML:"json"==c&&(e=$.test(e)?null:t.parseJSON(e))}catch(o){i=o}i?s(i,"parsererror",x,n,r):a(e,x,n,r)}else s(x.statusText||null,x.status?"error":"abort",x,n,r)}},o(x,n)===!1)return x.abort(),s(null,"abort",x,n,r),x;if(n.xhrFields)for(v in n.xhrFields)x[v]=n.xhrFields[v];var C="async"in n?n.async:!0;x.open(n.type,n.url,C,n.username,n.password);for(v in y)E.apply(x,y[v]);return n.timeout>0&&(d=setTimeout(function(){x.onreadystatechange=u,x.abort(),s(null,"timeout",x,n,r)},n.timeout)),x.send(n.data?n.data:null),x},t.get=function(){return t.ajax(h.apply(null,arguments))},t.post=function(){var e=h.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=h.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var r,o=this,a=e.split(/\s/),s=h(e,n,i),c=s.success;return a.length>1&&(s.url=a[0],r=a[1]),s.success=function(e){o.html(r?t("<div>").html(e.replace(b,"")).find(r):e),c&&c.apply(o,arguments)},t.ajax(s),this};var j=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(j(t)+"="+j(e))},d(n,t,e),n.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,n=[];return t([].slice.call(this.get(0).elements)).each(function(){e=t(this);var i=e.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&n.push({name:e.attr("name"),value:e.val()})}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t){try{return n(t)}catch(e){return null}}}}(Zepto);